# ç»„ä»¶æ ‘

## åˆå§‹åŒ–é˜¶æ®µ

comRef= componentFactory.create() åˆ›å»ºç»„ä»¶å®ä¾‹ï¼ŒrootViewã€‚

**rootViewInjector**ï¼šé“¾æ¥AppModuleInjector

**hostRNode**ï¼šæ ¹DOMã€<app-root>ã€‘

**rootContext**ï¼šä¸Šä¸‹æ–‡ç¯å¢ƒã€æ ¹èŠ‚ç‚¹ï¼Œä¸å…¶ä»–ç»„ä»¶çš„ä¸Šä¸‹æ–‡ä¸åŒã€‘

**rootTView**ï¼š

**rootLView**ï¼š

## æ‰§è¡Œé˜¶æ®µ

enterView(rootLView); ç»´æŠ¤viewçš„ä¸Šä¸‹æ–‡ã€‚

```typescript
let instructionState = {
	lFrame:{
        currentTNode,
        lView,
        tView,
        contextLView:lView,
        bindingIndex:tView.bindingStartIndex,
        currentQueryIndexï¼š
        bindingIndexï¼š
        inI18n
    },
    isInCheckNoChangesMode:
}

`currentQueryIndex`ï¼š
æ˜¯ä¸€ä¸ªè‡ªå¢çš„ ç´¢å¼•ï¼šï¼Œ
```

componentView = createRootComponentView(....)

```typescript
`1.` åˆ›å»º TNode[#host] è™šæ‹Ÿçš„TNode
`2.` viewRenderer              
`3.` componentLView, componentTView      
`4.` ç¡®å®šTNodeçš„injectorIndexï¼Œ  ã€ä¾èµ–æ³¨å…¥ã€‘
        å¹¶åˆå§‹åŒ–rootLViewï¼ŒrootTView.dataï¼ŒrootTView.blueprintçš„`BloomHash`
     å°†componentè‡ªèº« å‘å¸ƒåˆ°ä¾èµ–æ³¨å…¥ç³»ç»Ÿä¸­ã€‚
     
     å°†component è®°å½•åˆ° tview.components         
              
     åˆå§‹åŒ– TNodeçš„ providerIndexes ,directiveStart , directiveEnd          
              
`5.` å°† componentLView æ·»åŠ åˆ° rootView ä¸­ ã€è¡Œæˆå±‚çº§å…³ç³»ã€‘               
```

component = createRootComponent(...)

```typescript
`1.` å®ä¾‹åŒ– componentã€å¯èƒ½ä¼´éšæŸ¥æ‰¾ä¾èµ–çš„è¿‡ç¨‹ã€‘
`2.` æ³¨å†Œ TNodeä¸Šæ‰€æœ‰æŒ‡ä»¤çš„éƒ¨åˆ†åç½®ç”Ÿå‘½å‘¨æœŸ åˆ° tview ä¸­
     ã€iæ˜¯TNodeçš„directiveStart - directiveEndã€‘
     
     contentHooks          [-i,fn,....]    ngAfterContentInit
     contentCheckHooks     [i,fn,....]     ngAfterContentChecked
     viewHooks             [-i,fn,....]    ngAfterViewInit
     viewCheckHooks        [i,fn,....]     ngAfterViewChecked
     destroyHooks          [i,fn,....]     ngOnDestroy
     
```

renderView(rootTView, rootLView, null);

```typescript
`1.`  enterView(lView)  ã€ç»´æŠ¤ç¨‹åºä¸Šä¸‹æ–‡ã€‘
`2.`  æ‰§è¡Œ tView.viewQuery  ã€åˆ›å»º viewæŸ¥è¯¢è§†å›¾å…ƒæ•°æ®  tview.queries = [å…ƒæ•°æ®] ã€‘
`3.`  æ‰§è¡Œ tView.template   ã€æ‰§è¡Œ templateï¼Œåˆ›å»ºDOMã€‘
`4.`  æ›´æ–°é™æ€contentè§†å›¾ã€tView.contentQueriesã€‘ï¼Œåœ¨å£°æ˜æ—¶å¯é€šè¿‡ä¼ å…¥ {staticï¼štrue}
      åŠ¨æ€è§†å›¾ éœ€è¦åœ¨æ›´æ–°åæ‰èƒ½å¤„ç†
`5.`  å¤„ç†viewQueryã€æ›´æ–°æŸ¥è¯¢ç»“æœã€‘ã€å¤„ç†å­ç»„ä»¶å‰éœ€å¤„ç†ï¼Œå› ä¸ºï¼Œå­ç»„ä»¶å¯èƒ½æŠ•å½±ã€‘
`6.`  renderChildComponents(lView, tview.components);
`7.`  å¾ªç¯å¤„ç†å­ç»„ä»¶ renderComponent(hostLView, components[i]);   
      // ä» hostLView æ ¹æ® componentçš„ ç´¢å¼•å–å‡º LView,TView, CONTENT
`8.`  renderView(componentTView, componentView, componentView[CONTEXT])

æ‰§è¡Œé¡ºåºï¼š
  `1.`å…ˆåˆ›å»º viewQuery çš„å…ƒæ•°æ®è¡¨ï¼Œä»¥ä¾¿åœ¨åˆ›å»ºtemplateæ—¶ å°†æ¯ä¸ªèŠ‚ç‚¹ä¸ viewQueryçš„é€‰æ‹©ç¬¦ åŒ¹é…ã€‚
  `2.`åˆ›å»ºtemplate
  `3.`æ›´æ–° staticContentQueriesï¼ŒstaticViewQueriesã€åŠ¨æ€ çš„ åœ¨è¯•å›¾æ›´æ–°æ—¶èµ‹å€¼ã€‘
  `4.`renderViewå¾ªç¯æ›´æ–°å­è§†å›¾ tview.components

å¾ªç¯æ‰§è¡Œ renderView
```

### contentQueries

```typescript
function AppComponent_ContentQueries(rf,ctx,dirIndex) {
      if (rf & 1) { jit___contentQuery_3(dirIndex,_c0,1); }
      if (rf & 2) {
        var _t;
        (jit___queryRefresh_4((_t = jit___loadQuery_5())) && (ctx.content = _t.first));
      }
    }
`1.` åˆ›å»ºé˜¶æ®µï¼šÉµÉµcontentQuery
`2.` æ›´æ–°é˜¶æ®µï¼šÉµÉµqueryRefresh( ÉµÉµloadQuery ), èµ‹å€¼åˆ°å®ä¾‹ä¸­
```

#### ÉµÉµcontentQueryã€ContentChildã€‘[åˆ›å»ºé˜¶æ®µ]

å¤„ç†å†…å®¹æŸ¥è¯¢çš„æ—¶æœºæ˜¯ï¼šåœ¨ elementStart ç­‰ åˆ›å»º èŠ‚ç‚¹é˜¶æ®µ å®ä¾‹åŒ–æŒ‡ä»¤å æŸ¥è¯¢ã€‚

```typescript
`åˆ›å»ºä¸å†…å®¹æŸ¥è¯¢å…³è”çš„æŸ¥è¯¢åˆ—è¡¨ï¼Œä»¥ä¾¿ç¨ååˆ·æ–°`

TQueryMetadata_ = {
    predicate           // reference æ ‡è®°æ•°æ® [#name]
    flags = flags;      // æ ‡å¿—ä½ 2ï¼šisStaticContentQueries
                           tView.staticContentQueries = true;
    read = read;        // 
}
TQuery_ = {
        metadata = metadata;   // å­˜å‚¨çš„æ˜¯ğŸ‘†çš„ã€TQueryMetadata_ã€‘
        matches = null;
        indexInDeclarationView = -1;
        crossesNgTemplate = false;
        /**
         * A flag indicating if a given query still applies to nodes it is crossing. We use this flag
         * (alongside with _declarationNodeIndex) to know when to stop applying content queries to
         * elements in a template.
         */
        _appliesToNextNode = true;
        _declarationNodeIndex = nodeIndex; // contentQueriesï¼šå­˜å‚¨tNode.index
                                               
                                           // viewQueryï¼šå­˜å‚¨ä¸º -1
}
TQueries_ = {
    queries:[]  // å­˜å‚¨çš„ğŸ‘†çš„ TQuery_
}

`1.` è·å– tview
`2.` å¦‚æœtviewæ˜¯åˆæ¬¡åˆ›å»ºï¼Œåˆ›å»º tview.queries å­˜å‚¨ æŸ¥è¯¢æ¡ä»¶å’Œ tNode.index
        `1.` è·å– tNode
        `2.` åˆ›å»º tView.queries = TQueries_ã€TQuery_ã€TQueryMetadata_ã€‘ã€‘
`3.` å°† å½“å‰query çš„ å…ƒæ•°æ®ã€TQuery_ã€‘åœ¨ tView.queries çš„ç´¢å¼•åŠæŒ‡ä»¤çš„ç´¢å¼•å­˜å‚¨åˆ°
     tView.contentQueries = []  ä¸­
     
`-----------------------------------------------------------------`
QueryList = {
        _emitDistinctChangesOnly = _emitDistinctChangesOnly;
        dirty = true;
        _results = [];
        _changesDetected = false;
        _changes = null;
        length = 0;
        first = undefined;
        last = undefined;
}    
LQuery_ = {
     queryList = queryList;
     matches = null;
}
LQueries_ = {
    queries:[]
}     
     
`4.`  lView[QUERIES] = new LQueries_();   
      lView[QUERIES].queries.push(new LQuery_(queryList));
      // åˆ›å»º LQuery_ï¼Œåœ¨ 
        
`tview.queries`   :å­˜å‚¨ç”¨äºmatchçš„å…ƒæ•°æ®ï¼ŒåŠï¼Œmatch åˆ°çš„æ•°æ®
`tview.contentQueries`:å­˜å‚¨ contentç±»å‹çš„queriesåœ¨ tview.queries çš„ç´¢å¼•åŠæŒ‡ä»¤ç´¢å¼•
                       [ç´¢å¼•, æŒ‡ä»¤ç´¢å¼•]
`lView[QUERIES]`ï¼šå®¹å™¨ï¼Œå­˜å‚¨matchåˆ°çš„èŠ‚ç‚¹ï¼ŒåŠåœ¨å˜åŒ–æ—¶ emitå‡ºå»ã€‚
                  // å­˜å‚¨é˜¶æ®µï¼š
                  // æ›´æ–°é˜¶æ®µï¼š
```



### viewQueryã€ViewChildã€‘

```typescript
@ViewChild('dir') dir;

viewQuery ç¼–è¯‘åçš„å‡½æ•°ï¼š

var _c1 = ['dir'];
`viewQuery`:function AppComponent_Query(rf,ctx) {
      if (rf & 1) { ÉµÉµviewQuery(_c1,1); }
      if (rf & 2) {
        var _t;
        (jit___queryRefresh_3((_t = jit___loadQuery_4())) && (ctx.dir = _t.first));
      }
    }
`create`:åˆ›å»ºç”¨äºmatchçš„å…ƒæ•°æ®ã€tView.queriesã€‘
         åˆ›å»ºç”¨äºå­˜å‚¨ matchåˆ°çš„å…ƒç´ çš„å®¹å™¨ ã€lView[QUERIES]ã€‘

`update`:æ ¹æ® queryçš„ç´¢å¼•ï¼Œå»tView.query.matchä¸­æŸ¥æ‰¾ï¼Œæ›´æ–°ï¼Œå¹¶è§¦å‘äº‹ä»¶ã€‚
```

#### ÉµÉµviewQuery

```typescript
TQueryMetadata_ï¼š{
    predicateï¼š _c1ğŸ‘†, 
    flags = flags;      // æ ‡å¿—ä½ 2ï¼šisStaticContentQueries
                           tView.staticContentQueries = true;
    read: undefined   // read : null
                                  ElementRef,ViewContainerRef,TemplateRef,typeæ˜¯Container
                                  directiveOrProviderIdx
                                !== null  
}
TQueries_:{
    queries:[]
}
TQuery_:{
    metadata = metadata;  // TQueryMetadata_ğŸ‘†
    matches = null;       // åŒ¹é…åˆ°çš„å…ƒç´ 
    indexInDeclarationView = -1;     
    crossesNgTemplate = false;      //æ˜¯å¦ç©¿é€ åµŒå…¥è§†å›¾<ng-template>ï¼ŒæŸ¥è¯¢çš„
                                 
    
    // é™å®šæŸ¥è¯¢èŒƒå›´ï¼Œåœ¨ ÉµÉµelementEnd æ—¶ ç½®ä¸º falseã€core.js 26272ã€‘
    _appliesToNextNode = true;      // æŒ‡ç¤ºç»™å®šæŸ¥è¯¢æ˜¯å¦ä»åº”ç”¨äºå®ƒæ‰€è·¨è¶Šçš„èŠ‚ç‚¹çš„æ ‡å¿—
    _declarationNodeIndex = nodeIndex;
}
`1.`  æ ¹æ® æ ‡è¯†ç¬¦å‚æ•° _c1 ï¼Œåˆ›å»º TQueryMetadata_
`2.`  tView.queries = TQueries_
`3.`  `TQuery` å­˜å‚¨åˆ° tView.queries ä¸­ 
`4`   æ ¹æ®flag æ ‡è¯† tView.staticViewQueries = true  
------------------------------------------------------------------

QueryList:{
    _emitDistinctChangesOnly, // æ˜¯å¦ä»…æ›´æ”¹æ—¶è§¦å‘ change
    dirty,               // æ ‡è®°åœ¨æ›´æ”¹æ£€æµ‹æ—¶æ˜¯å¦æŸ¥è¯¢æ›´æ”¹
    _results,            // å­˜å‚¨æŸ¥è¯¢ç»“æœï¼Ÿ
    _changesDetected = false  // æ˜¯å¦å¼€å¯æ›´æ”¹å¹¿æ’­ã€å½“å¼€å¯æ—¶ï¼Œ_changeä¼šemitã€‘
    _changes = null;      // EventEmitteräº‹ä»¶
    length = 0;           // é•¿åº¦
    first = undefined;    // ç¬¬ä¸€ä¸ªï¼Œ@ViewChildï¼Œç”¨
    last = undefined;     // æœ€åä¸€ä¸ª
} 
LQueries_:{
    queries:[]
}   
`LQuery_`:{
    queryList = queryList; // ğŸ‘†QueryList
    matches = null;        // åœ¨åŒ¹é…åˆ° å†…å®¹åï¼Œåšå­˜å‚¨ç”¨
}

`5.`  lView[QUERIES] = LQueries_
`6.`  lView[QUERIES].queries.push(ğŸ‘†LQuery_)
--------------------------------------------------------------------

`tview.query`   :å­˜å‚¨ ç”¨äºmatchçš„æ•°æ®ï¼ŒåŠï¼Œmatch åˆ°çš„æ•°æ®
`lView[QUERIES]`ï¼šå®¹å™¨ï¼Œå­˜å‚¨matchåˆ°çš„èŠ‚ç‚¹ï¼ŒåŠåœ¨å˜åŒ–æ—¶ emitå‡ºå»
```

##### ÉµÉµloadQueryã€æ›´æ–°ã€‘[å…±ç”¨]

***contentquery å’Œ viewquery å…±ç”¨çš„å‡½æ•°***

```typescript
return loadQueryInternal(getLView(), getCurrentQueryIndex());

`1.` getLView()ï¼šè·å–å½“å‰`LView`
`2.` getCurrentQueryIndex():è·å–`instructionState.lFrame.currentQueryIndex`ï¼š

loadQueryInternal(lView, queryIndex){
    return lView[QUERIES].queries[queryIndex].queryList;
}

_t = loadQueryInternal()

`ä» lView[QUERIES] ä¸­ è·å– æŸ¥è¯¢çš„ç»“æœ`
```

##### ÉµÉµqueryRefresh[æ›´æ–°] [å…±ç”¨]

***contentquery å’Œ viewquery å…±ç”¨çš„å‡½æ•°***

```typescript
`æ ¹æ®tView.queriesä¸­å­˜å‚¨çš„æ ‡è®°ï¼Œåœ¨ tView.queries.matchesä¸­ æŸ¥æ‰¾å¯¹åº”çš„å…ƒç´ `

tView.queries.matches ä»å“ªæ¥ ï¼Ÿï¼Ÿï¼Ÿ

   åœ¨ ÉµÉµelementStart é˜¶æ®µï¼Œåˆ›å»º tNodeæ—¶ï¼Œæ ¹æ® 
     ã€tNode.localNames ä¸ predicateã€‘å¯¹æ¯”ï¼ŒåŒ¹é…å å­˜å…¥ tView.queries.matches
      tView.queries.matches.push(tNode.index, )
`tView.queries.matchesä¸­å­˜å‚¨çš„æ˜¯ åŒ¹é…åˆ° @ViewChildï¼Œ@ContentChildï¼Œ...ç­‰ æŸ¥è¯¢å‚æ•°çš„tNodeèŠ‚ç‚¹çš„ç´¢å¼•`
```

### åŒºåˆ«

```typescript
contentQueriesï¼š @ContentChildï¼Œ
viewQueryï¼š @ViewChildï¼Œä¸€ä¸ªæ˜¯æŸ¥è¯¢æŠ•å½±è¿›æŒ‡ä»¤çš„è§†å›¾ï¼Œä¸€ä¸ªæ˜¯æŸ¥è¯¢ç»„ä»¶è‡ªèº«çš„è§†å›¾ã€‚

params:{
    selector: è¦æŸ¥è¯¢çš„æŒ‡ä»¤ç±»å‹æˆ–åç§°
    read:  ç”¨äºä»æŸ¥è¯¢åˆ°çš„å…ƒç´ è¯»å–ä¸åŒçš„ä»¤ç‰Œ
    static: æ ‡è¯†æŸ¥è¯¢çš„ç»“æœçš„å±æ€§ã€é™æ€ã€åŠ¨æ€ã€‘ï¼Œé™æ€å°±å¯ä»¥åœ¨è¿è¡Œå˜æ›´æ£€æµ‹å‰è§£ææŸ¥è¯¢ç»“æœå¦åˆ™åœ¨å˜æ›´æ£€æµ‹
           åæŸ¥è¯¢ç»“æœã€é»˜è®¤falseã€‘
}

`æ‰§è¡Œæ—¶æœºä¸åŒ`ï¼šelementStarté˜¶æ®µå®ä¾‹åŒ– tNodeä¸Šæ‰€æœ‰çš„æŒ‡ä»¤åï¼Œè¿è¡Œæ‰€æœ‰æŒ‡ä»¤çš„contentQuerieså‡½æ•°ã€‚
             å­˜å‚¨ tNode.index, ç¡®å®š contentæŸ¥è¯¢çš„èŒƒå›´
```



# æ€»ç»“------------------------------------

```typescript
`ÉµÉµelementStart`çš„æœ€åé˜¶æ®µï¼Œå¤„ç† tNodeä¸Šæ‰€æœ‰æŒ‡ä»¤çš„ contentQueriesã€createé˜¶æ®µã€‘
`tview.query`ï¼š å­˜å‚¨ match ç”¨çš„ å…ƒæ•°æ®ã€#nameã€‘
`lView[QUERIES]`ï¼šå®¹å™¨ï¼Œå­˜å‚¨matchåˆ°çš„èŠ‚ç‚¹  [tNodeIndex,matchIndex]
`matché˜¶æ®µ`ï¼šelementStartFirstCreatePass çš„ æœ€åé˜¶æ®µ predicate ä¸ tNode.localNameså¯¹æ¯”ï¼ŒåŒ¹é…å
            å°†tNode.index å’Œ ã€Šæ ‡è®°ã€‹æ”¾åˆ° matchsä¸­ ã€TQuery_å®ä¾‹ä¸Šã€‘
               ã€Šæ ‡è®°ã€‹æ ¹æ®read åˆ¤æ–­ç±»å‹ ğŸ‘†ã€readå£°æ˜å¤„ã€‘


matcheså­˜å‚¨å½¢å¼ï¼š[tNode.index, æ ‡è®°]
               
tNode.localNameså­˜å‚¨å½¢å¼ï¼š['åç§°',ç´¢å¼•]

// æœ¬åœ°åç§°å¿…é¡»æŒ‰ç…§åœ¨æ¨¡æ¿ä¸­å®šä¹‰localrefçš„é¡ºåºå­˜å‚¨åœ¨tNodeä¸­
// ä»¥ç¡®ä¿æ•°æ®åŠ è½½åˆ°ä¸å…¶åœ¨æ¨¡æ¿ä¸­çš„ref//ç›¸åŒçš„æ’æ§½ä¸­ï¼ˆç”¨äºæ¨¡æ¿æŸ¥è¯¢ï¼‰
```

# executeTemplate

è¿è¡Œtemplateçš„æŒ‡ä»¤é›†ï¼Œåˆ›å»ºçœŸå®DOM

```typescript
`åˆ›å»ºDOMçš„ä¸Šä¸‹æ–‡æ˜¯`ï¼šinstructionState.lFrame = {
    lview,
    tview,
    currentNamespaceï¼šå‘½åç©ºé—´  // SVGå…ƒç´ 
    currentTNodeï¼š å½“å‰tnode   // 
    isParentï¼š                // æ˜¯å¦æ˜¯ ä¸Šçº§tNode
    elementDepthCountï¼š       // èŠ‚ç‚¹åµŒå¥—æ·±åº¦
    bindingsEnabledï¼š         // æ˜¯å¦ ç¦ç”¨ç»‘å®š 
}

`æŒ‡ä»¤é›† å½¢æ€å¦‚ä¸‹ï¼š`
    ÉµÉµelementStart(index,name,attrsIndex, localRefsIndex)
    ÉµÉµelementEnd()
    .....
    
`åˆ›å»ºtNodeæ—¶ï¼ŒåŒ¹é…åˆ°æŒ‡ä»¤ä¼šå­˜å‚¨åˆ°tview.components`
åœ¨æ›´æ–°å®Œå½“å‰ç»„ä»¶æ—¶ï¼Œå†render  tview.componentsï¼Œ
```

## ÉµÉµelementStartã€æ™®é€šDOMã€‘

```typescript
`1.` è·å–å½“å‰ä¸Šä¸‹æ–‡çš„lviewï¼Œtview   ã€lviewæ˜¯ å¸¸æ˜¥è—¤ï¼Œåˆ›å»ºçš„çœŸå®DOMéƒ½é¡ºåºå­˜å‚¨åœ¨lviewã€‘
           // åœ¨ç¼–è¯‘é˜¶æ®µå·²ç» ç¡®å®šæœ‰å¤šå°‘DOMï¼Œæ‰€ä»¥ lviewå·²ç»é¢„ç•™å‡ºå­˜å‚¨DOMçš„åŒºé—´ã€20-ã€‘
`2.` adjustedIndex = index + HEADER_OFFSET ã€DOMåœ¨lviewä¸­å­˜å‚¨çš„ä½ç½®ã€‘
                                           ã€tNodeåœ¨tview.dataå­˜å‚¨çš„ä½ç½®ã€‘
     // lview å’Œ tview ç´¢å¼•ä¸€ä¸€å¯¹åº”ï¼Œlview å­˜å‚¨ç”Ÿæˆçš„çœŸå®DOMï¼Œtview.dataå­˜å‚¨ç”ŸæˆçœŸå®DOMçš„å…ƒæ•°æ®
`3.` å–å‡º lview[RENDERER] ä¸­å­˜å‚¨çš„æ¸²æŸ“å‡½æ•°, æ ¹æ®name å’Œ parent åˆ›å»ºDOMèŠ‚ç‚¹
       // parent æ˜¯ ä¸ºäº†ç¡®å®šæ˜¯å¦ä½¿ç”¨Namespace currentNamespaceğŸ‘†
       // æ¯”å¦‚ svgå…ƒç´ 
`4.` åˆ›å»º tNodeã€tview.firstCreatePassçŠ¶æ€å°±åˆ›å»º tNodeï¼Œå¦åˆ™å°±åœ¨ tview.dataå­˜å‚¨ä¸­æ‹¿å€¼ã€‘
         ğŸ‘‡elementStartFirstCreatePass(adjustedIndex, tView, lView,
                                     native, name, attrsIndex, localRefsIndex)
`5.` setCurrentTNode(tNode, true); 
      // ç»´æŠ¤ä¸Šä¸‹æ–‡ instructionState.lFrameä¸­çš„
         currentTNode
         isParent
`6.` tNode.mergedAttrs: å°† tNodeä¸­çš„ å±æ€§æ·»åŠ åˆ° DOM ä¸Š
     tNode.styles       å°† tNodeä¸­çš„ styleæ·»åŠ åˆ° DOM ä¸Š
     tNode.classes      å°† tNodeä¸­çš„ classesæ·»åŠ åˆ° DOM ä¸Š
`7`  å°† DOM appendchild åˆ° parent
`8`  å¢åŠ èŠ‚ç‚¹æ·±åº¦  elementDepthCount++
`9.` å¦‚æœå½“å‰ tNodeæœ‰æŒ‡ä»¤ï¼Œæˆ–è€…å½“å‰tNodeå°±æ˜¯ç»„ä»¶ï¼šã€å¾ªç¯å¤„ç†ã€‘
       `1.` å®ä¾‹åŒ–å½“å‰tNodeä¸Šçš„æ‰€æœ‰æŒ‡ä»¤ï¼Œå°†inputsèµ‹å€¼åˆ° æŒ‡ä»¤ä¸Šã€‚
            åŒæ—¶å°†å®ä¾‹åŒ–çš„æŒ‡ä»¤ èµ‹å€¼åˆ° å¯¹åº”çš„lview çš„CONTEXT ä¸Š
       `2.` å¦‚æœå½“å‰tNode æœ‰ contentqueries ã€æ ¹æ® tNode.flagåˆ¤æ–­ã€‘
            è¿è¡Œæ‰€æœ‰æŒ‡ä»¤çš„çš„ def.contentQuerieså‡½æ•°ã€åˆ›å»ºå‘¨æœŸã€‘
`10.`å°† reference ä¸ tNodeè¿›è¡ŒåŒ¹é…ï¼ŒåŒ¹é…æˆåŠŸå å°† åŒ¹é…åˆ°çš„çœŸå®DOM æˆ–è€… Lview å­˜å‚¨åˆ°lviewä¸Šï¼Œ
        // lviewå¸¸æ˜¥è—¤å†æ¬¡å¢åŠ  åŒ¹é…åˆ°çš„å€¼å­˜å‚¨åœ¨tNodeåœ¨lviewä¸Šå¯¹åº”çš„ view/Domçš„ ä¸‹ä¸€ä¸ªä½ç½®ã€‚


```

### elementStartFirstCreatePass

```typescript
element åˆæ¬¡åˆ›å»º tNode
    @param index, 
    @param tView, 
    @param lView,
    @param native, 
    @param name, 
    @param attrsIndex, 
    @param localRefsIndex
`1.` è·å– tview.consts[attrsIndex]    // è·å–èŠ‚ç‚¹ä¸Šçš„æ‰€æœ‰å±æ€§
`2.` åˆ›å»º tNode å­˜å‚¨åˆ° tview.data[index]ä¸­ ã€éåˆæ¬¡åˆ›å»ºå°±ä»tview.dataä¸­æ‹¿ã€‘
`3.` è§£æ tNode ä¸Šçš„æŒ‡ä»¤ 
         // resolveDirectives(tView, lView, tNode, localRefs)
`4.` å¤„ç† tNode.attrsï¼ŒtNode.mergedAttrs
`5.` å¤„ç† tView.queries  // å°† æŸ¥è¯¢æ ‡è®° ä¸ tNode.localNames å¯¹æ¯”
                        // åŒ¹é…åå­˜å‚¨åˆ° tview.query.matchesä¸­
                           

æœ€ç»ˆè¿”å› tNode
```

#### resolveDirectives

```typescript
`1.` æŸ¥æ‰¾ tNode ä¸­çš„æŒ‡ä»¤ğŸ‘‡ã€findDirectiveDefMatchesã€‘
`2.` initTNodeFlags   // æ›´æ–° tNode.directiveStart
                                   .directiveEnd
                                   .providerIndexes
       // æ ¹æ® tview.dataçš„é•¿åº¦ å’Œ tNodeä¸ŠæŒ‡ä»¤çš„æ•°é‡ æ›´æ–° directiveStart å’Œ directiveEnd çš„ç´¢å¼•
       // åç»­å­˜å‚¨ æŒ‡ä»¤çš„å…ƒæ•°æ® åŠæŒ‡ä»¤æ³¨å…¥çš„factory
`3.`  è§£æ æŒ‡ä»¤çš„ providers å’Œ viewprovidersï¼Œå°†æ ‡è®°å­˜æ”¾åˆ° tNodeçš„ BloomHashåŒºåŸŸ 
                                           provider å­˜åˆ° tview.data
                                           providerFactory å­˜åˆ° lview
`4.`  æ ¹æ® åŒ¹é…åˆ°çš„æŒ‡ä»¤çš„æ•°é‡ æ‹“å±•  tview.data, lview, tview.blueprint
      // å› ä¸º  tview.data ä¼šå­˜å‚¨ æŒ‡ä»¤çš„ def
              lview ä¼šå­˜å‚¨æŒ‡ä»¤çš„ æ„é€ å‡½æ•° ç”Ÿæˆçš„ ä¾èµ–æ³¨å…¥å‡½æ•°
`5.`  å°† æŒ‡ä»¤çš„ hostAttrs åˆå¹¶åˆ° tNode.mergedAttrs // å’Œå¹¶å±æ€§

`6.`  tview.dataå­˜å‚¨æŒ‡ä»¤çš„å…ƒæ•°æ®ï¼Œ
      lview å’Œtview.blueprint å­˜å‚¨ æŒ‡ä»¤çš„æ³¨å…¥å·¥å‚
      
`7.` å¤„ç† æŒ‡ä»¤çš„ hostbinding æ•°æ®     // å­˜å‚¨åˆ° tView.hostBindingOpCodes
`8.` å¤„ç† æŒ‡ä»¤çš„ exportAsï¼Œä½¿å…¶æŒ‡å‘æŒ‡ä»¤åœ¨ å¸¸æ˜¥è—¤çš„ ç´¢å¼•ã€‚
`9.` æ›´æ–° tNodeçš„ flag ã€def.contentQueriesã€‘
                      ã€def.hostBindingsã€‘ 
        ä»¥ä¸Šä¸¤ä¸ªæ•°æ®éƒ½ä¼šå½±å“tNodeçš„ flag
`10.`æ³¨å†Œ æŒ‡ä»¤çš„ç”Ÿå‘½å‘¨æœŸ
     `1.` tView.preOrderHooksï¼š     å­˜å‚¨ngOnChangesï¼ŒngOnInitï¼ŒngDoCheck ç›¸å…³ç”Ÿå‘½å‘¨æœŸ
             å­˜å‚¨tNode.index
     `2.` tView.preOrderCheckHooks  å­˜å‚¨ngOnChangesï¼ŒngDoCheck ç›¸å…³ç”Ÿå‘½å‘¨æœŸ
             å­˜å‚¨tNode.index
`11.`ä»tNodeä¸­çš„attrs æŸ¥è¯¢ inputså±æ€§
       tNode.initialInputsï¼šè¾“å…¥å±æ€§ï¼Ÿï¼Ÿï¼Ÿ
       tNode.inputs : {
           å¤–éƒ¨åç§° ï¼š[æŒ‡ä»¤ç´¢å¼•,å†…éƒ¨åç§°]
       }
       tNode.outputsï¼š{
           å¤–éƒ¨åç§° ï¼š[æŒ‡ä»¤ç´¢å¼•,å†…éƒ¨åç§°]
       }
`12.`èµ‹å€¼tNode.localNamesï¼Œ // localRefs ä¸ exportsMap åŒ¹é…ï¼ŒåŒ¹é…æˆåŠŸåå­˜å…¥tNode.localNames
`13.`æœ€åå†ä¸€æ¬¡åˆå¹¶ tNode.mergedAttrs //è¿™æ · æ¨¡æ¿çš„å±æ€§æ‰æœ‰æœ€é«˜ä¼˜å…ˆçº§
```

##### findDirectiveDefMatches

```typescript
è§£æ tNodeä¸Šç»‘å®šçš„ æŒ‡ä»¤ã€å°†tNodeä¸` tview.directiveRegistry`çš„ selectors å¯¹æ¯”ã€‘
`1.` å½“åŒ¹é…åˆ° æ³¨å†Œçš„æŒ‡ä»¤ï¼Œå°±æ›´æ–°tNode.injectorIndexï¼Œå¹¶å°†æŒ‡ä»¤ å‘å¸ƒåˆ° DI ç³»ç»Ÿ
         tview.data
         lview
         tview.blueprint
`2.` å½“æŒ‡ä»¤æ˜¯ ç»„ä»¶æ—¶    tView.components.push(tNode.index) ã€æ”¶é›†å­æŒ‡ä»¤ã€‘
                     matches.unshift(def);
   
     å½“æŒ‡ä»¤æ˜¯ æŒ‡ä»¤æ—¶    matches.push(def);

return  matches
```

## ÉµÉµelementEnd

å…³é—­èŠ‚ç‚¹

```typescript
`1.` å¦‚æœå½“å‰tNodeã€isParent = trueã€‘ï¼Œ ç½®çŠ¶æ€ä½ isParent = false
`2.` å‡å°‘ Elment æ·±åº¦
`3.` tview.firstCreatePass = true ç¬¬ä¸€æ¬¡åˆ›å»º
               æ³¨å†Œ tNodeä¸ŠæŒ‡ä»¤çš„åç½®ç”Ÿå‘½å‘¨æœŸï¼šngAfterContentInitï¼ŒngAfterContentChecked 
                      ngAfterViewInitï¼ŒngAfterViewCheckedï¼ŒngOnDestroy
               åˆ°tviewä¸Š    
          å¦‚æœå½“å‰tNodeä¸Šæœ‰ contentqueriesï¼Œå…³é—­contentqueriesæŸ¥è¯¢
          TQuery_._declarationNodeIndex = tNode.index
                 ._appliesToNextNode  = false
`4.` è®¾ç½® styleï¼Œclass çš„ è¾“å…¥ï¼Œä¾‹å¦‚ï¼š
         `<div style="..." my-dir>` and `MyDir` with `@Input('style')` we need to write todirective input.
```

## ÉµÉµelementContainerStartã€ng-containerã€‘

<ng-container> æ˜¯templateçš„ å®¹å™¨ï¼ŒèŠ‚ç‚¹ä¸ä¼šæ¸²æŸ“åˆ° é¡µé¢ä¸­ï¼Œåªä¼šæ¸²æŸ“å†…éƒ¨èŠ‚ç‚¹

```typescript
`1.` è·å–ä¸Šä¸‹æ–‡ lviewï¼Œtviewï¼ŒåŠåç§»é‡ï¼š adjustedIndex = index + HEADER_OFFSET;
`2.` åˆ›å»ºtNodeã€tviewéç¬¬ä¸€æ¬¡åˆ›å»ºã€‘
        elementContainerStartFirstCreatePass(adjustedIndex, tView,
                                             lView, attrsIndex, localRefsIndex)
     æ‹¿ç¼“å­˜tNodeã€tview.data[adjustedIndex]ã€‘
`3.` æ›´æ–°currentTNodeï¼ŒisParent 
`4.` nativeNode æ˜¯ comment('ng-container'),æ¸²æŸ“æˆæ³¨é‡Š
`5.` æ·»åŠ åˆ°ä¸Šçº§nativeNode
`6.` nativeNode æ·»åŠ é™æ€å±æ€§ "__ngContext__" = lView
`7.` å½“å‰tNodeä¸Š å¦‚æœæœ‰æŒ‡ä»¤ï¼Œåˆ›å»ºæŒ‡ä»¤çš„å®ä¾‹
                         å¦‚æœæœ‰ contentqueriesï¼Œå¤„ç† contentqueries
`8.` å¤„ç† referentce                         
        
```

### elementContainerStartFirstCreatePass

åˆ›å»º <ng-container> çš„ tNode

```typescript
`1.` æ ¹æ® å±æ€§çš„indexå» tview.constsä¸­æ‹¿ èŠ‚ç‚¹å±æ€§ attrs
`2.` æ ¹æ® attrsï¼Œname = 'ng-container',index,åˆ›å»º tNode
`3.` å¤„ç† attrs ä¸­ çš„ styles Classes ï¼Œå­˜å‚¨åˆ° tNode.styles
                                       tNode.classes
`4.` ä» consts ä¸­ è·å– reference æ ‡è®°
`5.` è§£æ tNode ä¸Šçš„æŒ‡ä»¤ï¼Œä¸ºæŒ‡ä»¤åˆ›å»ºBloomHash åŒºåŸŸï¼Œ å°†æŒ‡ä»¤åŠå…¶providerså‘å¸ƒåˆ° DIç³»ç»Ÿä¸­
                       æ³¨å†ŒæŒ‡ä»¤ çš„ç”Ÿå‘½å‘¨æœŸ
                       åˆå§‹åŒ–æŒ‡ä»¤çš„ inputï¼Œoutputå±æ€§
                       æŒ‡ä»¤ä¸referenceåŒ¹é…ï¼Œå¦‚æœæœ‰åŒ¹é…çš„ ç¼“å­˜åˆ° tNode.localNames 
                       åˆå¹¶æŒ‡ä»¤çš„ hostbindingå±æ€§åˆ° tNodeä¸Š
`6.` å¤„ç† queriesï¼Œå°† tNode.localName ä¸ æŸ¥è¯¢è£…é¥°å™¨ä¸­çš„å‚æ•°åšå¯¹æ¯”ï¼ŒåŒ¹é…åç¼“å­˜
                    åŒæ—¶ä¹ŸåŒ¹é… æŒ‡ä»¤å’Œproviders
```

## ÉµÉµelementContainerEnd

```typescript
`1.` isParent  = false
`2.` tview.firstCreatePassã€tviewç¬¬ä¸€æ¬¡åˆ›å»ºã€‘
     `1.`æ³¨å†ŒtNodeä¸Šæ‰€æœ‰æŒ‡ä»¤çš„åç½®ç”Ÿå‘½å‘¨æœŸï¼š ngAfterContentInitï¼ŒngAfterContentCheckedï¼Œ
                                ngAfterViewInitï¼ŒngAfterViewCheckedï¼ŒngOnDestroy
         // init ç­‰åªæ‰§è¡Œä¸€æ¬¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ˜¯å¦‚ä¸‹ä¿å­˜å½¢å¼                       
             [-i, ç”Ÿå‘½å‘¨æœŸå‡½æ•°]  //  iæ˜¯æŒ‡ä»¤åœ¨tview.dataä¸Šçš„ç´¢å¼•ï¼Œ
         // checked ç­‰ç”Ÿå‘½å‘¨æœŸï¼Œæ˜¯å¦‚ä¸‹ä¿å­˜å½¢å¼
            [iï¼Œç”Ÿå‘½å‘¨æœŸå‡½æ•°] ï¼Œè€Œä¸”å¦‚æœ checkedç”Ÿå‘½å‘¨æœŸï¼Œä¹Ÿä¼šå¾€ init å¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸå­˜[i,ç”Ÿå‘½å‘¨æœŸå‡½æ•°]
     `2.`å¦‚æœå½“å‰tNodeä¸Šæœ‰ contentqueriesï¼Œå…³é—­contentqueriesæŸ¥è¯¢
          TQuery_._declarationNodeIndex = tNode.index
                 ._appliesToNextNode  = false
        

                                
```

## ÉµÉµtemplateã€ng-templateã€‘

<ng-template>å’Œ   <ng-container>éƒ½ä¼šåˆ›å»ºæ’å…¥è§†å›¾ï¼Œç‹¬ç«‹äº componentä¹‹å¤–ï¼Œ

åŠ¨æ€æ’å…¥è§†å›¾ï¼Œä¼šåˆ›å»º ***LContainer*** 

```typescript
åœ¨ template å‡½æ•°ä¸­ï¼Œåƒ <ng-template>,<ng-container>,ä¼šæœ‰è‡ªå·±çš„ç‹¬ç«‹åˆ›å»ºå‡½æ•°ï¼ŒåŠç‹¬ç«‹æ’å…¥å‡½æ•°

`ç‹¬ç«‹æ’å…¥å‡½æ•°`:
function AppComponent_ng_container_7_Template(rf,ctx) {
  if (rf & 1) { jit___elementContainer_0(0); }
}
function AppComponent_ng_template_11_Template(rf,ctx) {
}
`ç‹¬ç«‹åˆ›å»ºå‡½æ•°`ï¼šÉµÉµtemplate(index, ç‹¬ç«‹æ’å…¥å‡½æ•°, èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹åç§°) 

`å¦‚ä¸‹`ï¼š

<ng-container>ï¼šÉµÉµtemplate(index, è§†å›¾å‡½æ•°ğŸ‘†, declsï¼Œvars,
                          'ng-container',attrsIndex,
                          localRefs,localRefExtractor)
        jit___template_13(7,AppComponent_ng_container_7_Template,1,0,'ng-container',2)

------------------------------------
<ng-template>ï¼šÉµÉµtemplate(index, è§†å›¾å‡½æ•°, èŠ‚ç‚¹ï¼Œ'ng-template')
        jit___template_13(11,AppComponent_ng_template_11_Template,0,0,'ng-template',
                       null,3,jit___templateRefExtractor_15);
```



```typescript
`1.` è·å–ä¸Šä¸‹æ–‡æ•°æ® lviewï¼Œtviewï¼ŒadjustedIndex
`2.` ç¬¬ä¸€æ¬¡å°±åˆ›å»ºtNodeï¼Œå¦åˆ™å°±æ‹¿ç¼“å­˜tview.data[adjustedIndex]
     templateFirstCreatePass(adjustedIndex, tView, lView, 
      ğŸ‘‡                      templateFn, decls, vars, 
                             tagName, attrsIndex, localRefsIndex)
`3.` åˆ›å»º æ³¨é‡ŠèŠ‚ç‚¹comment
     æ’å…¥åˆ° parentä¸­
`4.` comment.__ngContext__ = lview  
`5`  æ’å…¥åˆ° viewtree ã€ä½†æ˜¯ä¼šç‹¬ç«‹åˆ›å»ºä¸€ä¸ªLContainerã€‘
       lView[adjustedIndex] = createLContainer(comment, lView, comment, tNode)ğŸ‘‡
`6.` å¦‚æœå½“å‰tNodeä¸Šæœ‰æŒ‡ä»¤ï¼Œå®ä¾‹åŒ–æŒ‡ä»¤
     æœ‰ referenceæ ‡è®°ï¼Œå°±åŒ¹é…åç¼“å­˜
```

### templateFirstCreatePass

```typescript
`1.` è·å– tview.constsä¸­ å±äº å½“å‰ tnodeçš„ å±æ€§
`2.` åˆ›å»º Container ç±»å‹çš„ tnode   //æ ¹æ® indexï¼ŒtagNameï¼Œattrs
`3.` è§£æ tNode ä¸Šçš„ æŒ‡ä»¤ï¼Œåˆ›å»º æŒ‡ä»¤ï¼Œprovidersä¾èµ–æ³¨å…¥åŒºåŸŸ
`4.` æ³¨å†Œ åç½® ç”Ÿå‘½å‘¨æœŸ åˆ° tviewä¸­
`5.` åˆ›å»ºåµŒå…¥è§†å›¾
          const embeddedTView = tNode.tViews = createTView(2 /* Embedded */, 
                                                           tNode, templateFn, decls,
                                                           vars, tView.directiveRegistry, 
                                                           tView.pipeRegistry, null, 
                                                           tView.schemas, tViewConsts);
`6.` å¦‚æœ tview.querieså­˜åœ¨ åŒæ ·è¿›è¡ŒåŒ¹é…
     `è€Œä¸”ä¼šåœ¨åµŒå…¥è§†å›¾ä¸ŠåŒ¹é… embeddedTView.queries = tView.queries.embeddedTView(tNode)`

`7.` è¿”å›åˆ›å»ºçš„ tNode
```

#### createTView

```typescript
å°±æ˜¯åˆ›å»ºä¸€ä¸ª åµŒå…¥ç±»å‹ã€Embeddedã€‘çš„ tview   // ç»§æ‰¿äº†å½“å‰tviewçš„ä¸€äº›å±æ€§
```

#### createLContainer

```typescript
const lContainer = new (ngDevMode ? LContainerArray : Array)(hostNative, // host native
    true, // Boolean `true` in this position signifies that this is an `LContainer`
    false, // has transplanted views
    currentView, // parent
    null, // next
    0, // transplanted views to refresh count
    tNode, // t_host
    native, // native,
    null, // view refs
    null);
```

## æ›´æ–°é˜¶æ®µ



application._loadComponent(compRef)

```typescript
`åˆ›å»ºcompRef`ï¼š  // åœ¨åˆ›å»ºç»„ä»¶å®ä¾‹è¿‡ç¨‹æœ€åï¼Œæ‰æ˜¯åˆ›å»ºçš„ç»„ä»¶å®ä¾‹
          return new ComponentRef$1(this.componentType, 
                                    component, 
                                    createElementRef(tElementNode, rootLView), 
                                    rootLView, 
                                    tElementNode);
	compRef = {
        this.location = location;
        this._rootLView = _rootLView;
        this._tNode = _tNode;
        this.instance = instance;
        this.hostView = this.changeDetectorRef = new RootViewRef(_rootLView);ğŸ‘‡
        this.componentType = componentType; 
    }
	

`1.` this.attachView(componentRef.hostView)  // å°† RootViewRef æ”¾å…¥ application._viewsä¸­
        // viewRef.attachToAppRef(this), å°†åº”ç”¨å­˜å‚¨åˆ° RootViewRef ä¸Š
`2.` this.tick() ğŸ‘‡ã€ApplicationRefã€‘
```

#### ApplicationRef

```typescript
class ApplicationRef {
    tick() {
        if (this._runningTick) {
            throw new Error('ApplicationRef.tick is called recursively');
        }
        try {
            this._runningTick = true;
            for (let view of this._views) {
                view.detectChanges();ğŸ‘‡ã€RootViewRefã€‘
            }
            // Note that we have still left the `isDevMode()` condition in order to avoid
            // creating a breaking change for projects that still use the View Engine.
            if ((typeof ngDevMode === 'undefined' || ngDevMode) && isDevMode()) {
                for (let view of this._views) {
                    view.checkNoChanges();
                }
            }
        }
        catch (e) {
            // Attention: Don't rethrow as it could cancel subscriptions to Observables!
            this._zone.runOutsideAngular(() => this._exceptionHandler.handleError(e));
        }
        finally {
            this._runningTick = false;
        }
    }
}    

```

#### RootViewRef

```typescript
class RootViewRef extends ViewRef {
    constructor(_view) {
        super(_view);
        this._view = _view;
    }
    detectChanges() {
        detectChangesInRootView(this._view);
    }
    checkNoChanges() {
        checkNoChangesInRootView(this._view);
    }
    get context() {
        return null;
    }
}
```

#### ViewRef

```typescript
class ViewRef {
    constructor(_lView, _cdRefInjectingView) {
        this._lView = _lView;
        this._cdRefInjectingView = _cdRefInjectingView;
        this._appRef = null;
        this._attachedToViewContainer = false;
    }
    attachToAppRef(appRef) {
        if (this._attachedToViewContainer) {
            throw new Error('This view is already attached to a ViewContainer!');
        }
        this._appRef = appRef;
    }
}
```

###  refreshView(...)

æ›´æ–° view

```typescript
* - executing a template function in update mode;   // template çš„æ›´æ–°é€»è¾‘
* - executing hooks;                                // å¤„ç†ç”Ÿå‘½å‘¨æœŸ
* - refreshing queries;                             // æ›´æ–°è§†å›¾æŸ¥è¯¢
* - setting host bindings;                          // è®¾ç½® host binding
* - refreshing child (embedded and component) views.// æ›´æ–°å­view

`1.` enterView(lView);   // ç»´æŠ¤ä¸Šä¸‹æ–‡
`2.` é‡ç½® å‰ç½® ç”Ÿå‘½å‘¨æœŸé’©å­ flagæ ‡å¿—ä½ä¸º 0
`3.` æ‰§è¡Œ tview.template() 
`4.` æ ¹æ®viewçš„çŠ¶æ€ flag, æ‰§è¡Œå‰ç½®é’©å­ã€OnInit, OnChanges, DoCheckã€‘ 
           // å¦‚æœåˆå§‹åŒ–å·²å®Œæˆï¼Œå°±åªæ‰§è¡Œ check ç±»ç”Ÿå‘½å‘¨æœŸ
           // æœªå®Œæˆï¼Œå°±æ‰§è¡Œ
`5.` å°†lviewä¸­å£°æ˜çš„ç§»æ¤è§†å›¾æ ‡è®°ä¸ºåœ¨æ’å…¥ç‚¹æ›´æ–°ã€‚ // ç§»æ¤çš„è§†å›¾ ä¸ lview[CHILD_HEAD] ç›¸å…³ã€‚
`6.` æ£€æŸ¥åµŒå…¥å¼è§†å›¾ï¼ˆé€šè¿‡ViewContainerRef APIåˆ›å»ºçš„è§†å›¾ï¼‰å¹¶é€šè¿‡æ‰§è¡Œå…³è”çš„æ¨¡æ¿å‡½æ•°åˆ·æ–°å®ƒä»¬
`7.` æ›´æ–° contentQueries
`8.` æ‰§è¡Œ contentQueries è§†å›¾ç›¸å…³çš„ç”Ÿå‘½å‘¨æœŸ
`9.` æ‰§è¡Œ host binding ç›¸å…³çš„ å‡½æ•°
`10` refreshChildComponents   // æ›´æ–°å­ç»„ä»¶
`11` æ›´æ–° viewQuery
`12` æ‰§è¡Œ viewQuery ç›¸å…³çš„ç”Ÿå‘½å‘¨æœŸ
```

## åµŒå…¥è§†å›¾

